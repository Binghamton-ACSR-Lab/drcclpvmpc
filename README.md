# Distributionally Robust Chance Constraint - Linear Parameter Varying Model predictive control (DRCC-LPVMPC)

This simulation is supporting Python3.12, please refer to `python312` branch if interested.

## Installation

It is recommended to create a new virtual environment, we recommend user to use [Miniforge](https://github.com/conda-forge/miniforge) to create virtual environment:It is recommended to create a new conda environment:

```
conda create --name drcc_lpvmpc python=3.8.19
conda activate drcc_lpvmpc
```

To install drcc_lpvmpc:

```
git clone https://github.com/Heliosfang/drcc_lpvmpc.git
cd drcc_lpvmpc/
pip install -e .
```

## Run drcc_lpvmpc

```
cd drcc_lpvmpc
cd main
python drcc_lpvmpc_main.py
```

## Modify the main file

First, refer to the main/config/config.yaml

Change useDRCC to False and then run the main file again, this will lead to control the vehicle with pure quasi-lpvmpc controller.
Change add_disturbance to True and then run the main file again, this will add additive random noise to the vehicle location which simulate the disturbance from other factors e.g. localizations, sensors, etc.

## Simulation use DRCC-LPVMPC (No Extra Disturbances)

Simulation environment use ETHZ from [MPCC](https://github.com/alexliniger/MPCC), where only raceline is used, tracking reference is generated by a least time optimization process.

No random disturbances are added to the states of the vehicle:

https://github.com/user-attachments/assets/83a9d1f2-f537-4099-aca4-50c9e0fecd48

## Simulation use DRCC-LPVMPC (Extra Random Disturbances added)

Random disturbances are added to the states of the vehicle at each steps:

https://github.com/user-attachments/assets/0c8794ac-ff24-434f-bd14-65213d8e666d

## ROS2 Package with Simulation in CARLA

[ROS2 package](https://github.com/Heliosfang/ros2_ws) is also provide with carla simulation demo.

## Full Video Demo (Static obstacles and Moving obstacles with/without disturbance; CARLA simulation; Real Experiments)

https://github.com/user-attachments/assets/fd6a4548-4671-49ab-a2e4-55e06d203cdd



